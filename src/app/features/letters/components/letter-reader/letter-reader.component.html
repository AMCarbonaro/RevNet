<div class="letter-reader">
  <!-- Header -->
  <div class="letter-header">
    <button (click)="goBack()" class="back-btn">
      <i class="icon-arrow-left"></i>
      Back to Letters
    </button>
    
    <div class="letter-nav">
      <button (click)="goToPreviousLetter()" class="nav-btn" [disabled]="!letter || letter.id <= 1">
        <i class="icon-arrow-left"></i>
        Previous
      </button>
      <button (click)="goToNextLetter()" class="nav-btn" [class.complete-mode]="letter && letter.id >= 30" [disabled]="!letter || letter.id > 30">
        {{ letter && letter.id >= 30 ? 'Complete' : 'Next' }}
        <i class="icon-arrow-right"></i>
      </button>
    </div>
    
    <div class="letter-meta" *ngIf="letter">
      <span class="book-badge">{{ letter.book | titlecase }}</span>
      <span class="read-time">{{ letter.estimatedReadTime }} min read</span>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner">
      <i class="icon-loader animate-spin"></i>
    </div>
    <p>Loading letter...</p>
  </div>

        <!-- Letter Content -->
        <div *ngIf="!isLoading && letter" class="letter-content" #letterContent>
          <!-- Swipe Indicator -->
          <div class="swipe-indicator">
            <i class="fas fa-arrow-left"></i>
            <span>Swipe to navigate</span>
            <i class="fas fa-arrow-right"></i>
          </div>
          
          <h1 class="letter-title">{{ letter.title }}</h1>
          
          <div class="letter-body" [innerHTML]="letter.content"></div>
    
    <!-- Letter Actions -->
    <div class="letter-actions">
      <button 
        *ngIf="!isCompleted" 
        (click)="goToNextLetter()"
        class="action-btn primary">
        <i class="icon-arrow-right"></i>
        Next Letter
      </button>
      <button 
        *ngIf="isCompleted" 
        (click)="goToNextLetter()"
        class="action-btn secondary">
        <i class="icon-arrow-right"></i>
        Continue
      </button>
      <div *ngIf="isCompleted" class="completed-message">
        <i class="icon-check-circle"></i>
        <span>Letter completed!</span>
      </div>
    </div>
  </div>

  <!-- Locked Letter State -->
  <div *ngIf="!isLoading && isLocked" class="locked-state">
    <div class="locked-icon">
      <i class="fas fa-lock"></i>
    </div>
    <h3>Letter Locked</h3>
    <p>You need to complete the previous letter before accessing this one.</p>
    <button (click)="goBack()" class="btn-secondary">
      <i class="icon-arrow-left"></i>
      Back to Letters
    </button>
  </div>

  <!-- Error State -->
  <div *ngIf="!isLoading && !letter && !isLocked" class="error-state">
    <div class="error-icon">
      <i class="icon-x"></i>
    </div>
    <h3>Letter Not Found</h3>
    <p>The requested letter could not be found.</p>
    <button (click)="goBack()" class="btn-secondary">
      <i class="icon-arrow-left"></i>
      Back to Letters
    </button>
  </div>
</div>

