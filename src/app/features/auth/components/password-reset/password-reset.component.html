<div class="reset-page">
  <div class="cyberpunk-bg">
    <div class="matrix-rain"></div>
    <div class="neon-grid"></div>
    <div class="scanlines"></div>
  </div>

  <div class="reset-container">
    <div class="reset-card">
      <div class="reset-header">
        <h1 class="reset-title">
          <span class="text-gradient">Reset Password</span>
        </h1>
        <p class="reset-subtitle">Enter your new password</p>
      </div>

      <div *ngIf="errorMessage" class="error-message">
        <i class="icon-x"></i>
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-message">
        <div class="success-icon">âœ“</div>
        <p>{{ successMessage }}</p>
        <button class="btn-primary" (click)="goToLogin()">Go to Login</button>
      </div>

      <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="reset-form" *ngIf="!successMessage && token">
        <div class="form-group">
          <label for="password">New Password</label>
          <input
            id="password"
            type="password"
            formControlName="password"
            placeholder="Minimum 8 characters"
            [class.error]="resetForm.get('password')?.invalid && resetForm.get('password')?.touched">
          <div class="field-error">
            <span *ngIf="resetForm.get('password')?.invalid && resetForm.get('password')?.touched && resetForm.get('password')?.errors?.['required']">Password is required</span>
            <span *ngIf="resetForm.get('password')?.invalid && resetForm.get('password')?.touched && resetForm.get('password')?.errors?.['minlength']">Password must be at least 8 characters</span>
          </div>
        </div>

        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <input
            id="confirmPassword"
            type="password"
            formControlName="confirmPassword"
            placeholder="Re-enter your password"
            [class.error]="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched">
          <div class="field-error">
            <span *ngIf="resetForm.get('confirmPassword')?.invalid && resetForm.get('confirmPassword')?.touched && resetForm.get('confirmPassword')?.errors?.['required']">Please confirm your password</span>
            <span *ngIf="resetForm.errors?.['mismatch'] && resetForm.get('confirmPassword')?.touched">Passwords do not match</span>
          </div>
        </div>

        <button
          type="submit"
          class="btn-primary"
          [disabled]="resetForm.invalid || isLoading">
          <span *ngIf="isLoading">Resetting...</span>
          <span *ngIf="!isLoading">Reset Password</span>
        </button>
      </form>

      <div class="reset-footer" *ngIf="!successMessage">
        <button class="btn-link" (click)="goToLogin()">Back to Login</button>
      </div>
    </div>
  </div>
</div>

